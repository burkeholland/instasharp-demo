(function(){define(["jquery","kendo","text!mylibs/feed/views/template.html","text!mylibs/feed/views/item-template.html"],function(n,t,i,r){var e,o,f,u;return f=null,o=t.template(r),e=new t.data.DataSource({transport:{read:"api/users/feed"},schema:{parse:function(n){return f=n.pagination.next_max_id,n},data:"data"},change:function(n){return $.each(n.items,function(n,t){return $("#feed").append(o(t))})},requestEnd:function(){return u.set("loading",!1)}}),u=t.observable({more:function(){return u.set("loading",!0),$.get("api/users/feed?next_max_id="+f,function(n){return $.each(n.data,function(n,t){return e.add(t)}),f=n.pagination.next_max_id,u.set("loading",!1)})},loading:!0,select:function(n){var t,i;return t=$(n.target),i=t.data("id"),t.hasClass("selected")?$["delete"]("api/media/"+i+"/like",function(){return t.removeClass("selected")}):$.post("api/media/"+i+"/like",function(){return t.addClass("selected")})}}),new t.View(i,{model:u,init:function(){return e.read()}})})}).call(this)