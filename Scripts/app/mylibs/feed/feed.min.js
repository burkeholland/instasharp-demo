(function(){define(["jquery","kendo","text!mylibs/feed/views/template.html","text!mylibs/feed/views/item-template.html"],function(n,t,i,r){var f,u;return f=null,$(document.body).append(r),u=t.observable({feed:new t.data.DataSource({transport:{read:"api/users/feed"},schema:{parse:function(n){return f=n.pagination.next_max_id,n},data:"data",model:{id:"id"}},requestEnd:function(){return u.set("loading",!1)}}),more:function(){return u.set("loading",!0),$.get("api/users/feed?next_max_id="+f,function(n){return $.each(n.data,function(n,t){return feed.add(t)}),f=n.pagination.next_max_id,u.set("loading",!1)})},loading:!0,liking:!1,select:function(n){var t,u,r,i,f=this;return this.set("liking",!0),t=$(n.target),r=t.data("id"),u=this.get("feed"),i=u.get(r),t.hasClass("selected")?$.post("api/media/"+r+"/like/delete",function(){return i.likes.count=i.likes.count-1,t.removeClass("selected"),f.set("liking",!1)}):$.post("api/media/"+r+"/like",function(){return i.likes.count=i.likes.count+1,t.addClass("selected"),f.set("liking",!1)})}}),new t.View(i,{model:u})})}).call(this)